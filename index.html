      reader.onload = function (event) {
          const img = new Image();
          img.onload = function () {
            canvas.width = img.width;
            canvas.height = img.height;
            const ctx = canvas.getContext('2d');
            ctx.drawImage(img, 0, 0);

            // Convert canvas to PNG and create download link
            const pngData = canvas.toDataURL('image/png');
            downloadLink.href = pngData;
            downloadLink.style.display = 'inline-block';
          };
          img.src = event.target.result;
        };

        reader.readAsDataURL(file);
      } else {
        alert('Please upload a JPG file first.');
      }
    }
  </script>
</body>
</html>
